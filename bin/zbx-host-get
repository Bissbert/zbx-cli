#!/usr/bin/env bash
set -euo pipefail
# shellcheck disable=SC1007,SC2015,SC1090,SC1091
SD="$(CDPATH= cd -- "$(dirname -- "$0")" && pwd)"; PATH="$SD:$PATH"
. "$SD/log-lib"; . "$SD/zbx-lib"
case "${1:-}" in
  -h|--help)
    cat <<'EOF'
Usage: zbx host-get <host>

Show full JSON for a host, including interfaces, templates, and macros.

Details:
  Useful for scripting or inspection of host details.
EOF
    exit 0 ;;
esac
host="${1:-}"; [ -z "$host" ] && { echo "Usage: $(basename "$0") <host>"; exit 2; }
jq -n --arg host "$host" '{filter:{host:$host}, output:"extend", selectInterfaces:"extend", selectParentTemplates:["templateid","name"], selectMacros:"extend"}' | zbx_call host.get | jq '.result[0] // empty'
