#!/usr/bin/env bash
set -euo pipefail
# shellcheck disable=SC1007,SC2015,SC1090,SC1091
SD="$(CDPATH= cd -- "$(dirname -- "$0")" && pwd)"; PATH="$SD:$PATH"
. "$SD/log-lib"; . "$SD/zbx-lib"
case "${1:-}" in
  -h|--help)
  cat <<'EOF'
Usage: zbx trigger-enable <triggerid>

Enable a trigger by ID.

Details:
  Sets trigger status to enabled.
EOF
    exit 0 ;;
esac
tid="${1:-}"; [ -z "$tid" ] && { echo "Usage: $(basename "$0") <triggerid>"; exit 2; }
jq -n --arg tid "$tid" --argjson st 0 '{triggerid:($tid|tonumber), status:$st}' | zbx_call trigger.update | jq -r '"ok triggerid=" + (.result.triggerids[0])'
