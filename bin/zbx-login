#!/usr/bin/env bash
set -euo pipefail
# shellcheck disable=SC1007,SC2015,SC1090,SC1091
SD="$(CDPATH= cd -- "$(dirname -- "$0")" && pwd)"; PATH="$SD:$PATH"
. "$SD/log-lib"; . "$SD/zbx-lib"
case "${1:-}" in
  -h|--help)
    cat <<'EOF'
Usage: zbx login

Ensure a valid API session by performing user.login if needed.

Details:
  Caches the session token with a 30-minute TTL (session mode).
EOF
    exit 0 ;;
esac
zbx_login && echo ok
